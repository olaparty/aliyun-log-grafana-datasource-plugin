/*! For license information please see module.js.LICENSE.txt */
define(["@emotion/css","@grafana/data","@grafana/runtime","@grafana/ui","lodash","react"],((e,t,r,n,o,a)=>(()=>{"use strict";var i=[e=>{e.exports=a},e=>{e.exports=n},t=>{t.exports=e},e=>{e.exports=o},e=>{e.exports=t},e=>{e.exports=r},,(e,t,r)=>{e.exports=r(8)},(e,t)=>{const r={TimePicker:{openButton:"data-testid TimePicker Open Button",fromField:"Time Range from field",toField:"Time Range to field",applyTimeRange:"data-testid TimePicker submit button",calendar:{label:"Time Range calendar",openButton:"Open time range calendar",closeButton:"Close time range Calendar"},absoluteTimeRangeTitle:"data-testid-absolute-time-range-narrow"},DataSource:{TestData:{QueryTab:{scenarioSelectContainer:"Test Data Query scenario select container",scenarioSelect:"Test Data Query scenario select",max:"TestData max",min:"TestData min",noise:"TestData noise",seriesCount:"TestData series count",spread:"TestData spread",startValue:"TestData start value",drop:"TestData drop values"}},DataSourceHttpSettings:{urlInput:"Datasource HTTP settings url"},Jaeger:{traceIDInput:"Trace ID"},Prometheus:{configPage:{exemplarsAddButton:"Add exemplar config button",internalLinkSwitch:"Internal link switch"},exemplarMarker:"Exemplar marker"}},Menu:{MenuComponent:e=>`${e} menu`,MenuGroup:e=>`${e} menu group`,MenuItem:e=>`${e} menu item`,SubMenu:{container:"SubMenu container",icon:"SubMenu icon"}},Panels:{Panel:{title:e=>`data-testid Panel header ${e}`,headerItems:e=>`Panel header item ${e}`,containerByTitle:e=>`${e} panel`,headerCornerInfo:e=>`Panel header ${e}`},Visualization:{Graph:{VisualizationTab:{legendSection:"Legend section"},Legend:{legendItemAlias:e=>`gpl alias ${e}`,showLegendSwitch:"gpl show legend"},xAxis:{labels:()=>"div.flot-x-axis > div.flot-tick-label"}},BarGauge:{value:"Bar gauge value",valueV2:"data-testid Bar gauge value"},PieChart:{svgSlice:"Pie Chart Slice"},Text:{container:()=>".markdown-html"},Table:{header:"table header",footer:"table-footer"}}},VizLegend:{seriesName:e=>`VizLegend series ${e}`},Drawer:{General:{title:e=>`Drawer title ${e}`,expand:"Drawer expand",contract:"Drawer contract",close:"Drawer close",rcContentWrapper:()=>".drawer-content-wrapper"}},PanelEditor:{General:{content:"Panel editor content"},OptionsPane:{content:"Panel editor option pane content",select:"Panel editor option pane select",fieldLabel:e=>`${e} field property editor`},DataPane:{content:"Panel editor data pane content"},applyButton:"Apply changes and go back to dashboard",toggleVizPicker:"toggle-viz-picker",toggleVizOptions:"toggle-viz-options",toggleTableView:"toggle-table-view"},PanelInspector:{Data:{content:"Panel inspector Data content"},Stats:{content:"Panel inspector Stats content"},Json:{content:"Panel inspector Json content"},Query:{content:"Panel inspector Query content",refreshButton:"Panel inspector Query refresh button",jsonObjectKeys:()=>".json-formatter-key"}},Tab:{title:e=>`Tab ${e}`,active:()=>'[class*="-activeTabStyle"]'},RefreshPicker:{runButton:"RefreshPicker run button",intervalButton:"RefreshPicker interval button",runButtonV2:"data-testid RefreshPicker run button",intervalButtonV2:"data-testid RefreshPicker interval button"},QueryTab:{content:"Query editor tab content",queryInspectorButton:"Query inspector button",queryHistoryButton:"Rich history button",addQuery:"Query editor add query button"},QueryHistory:{queryText:"Query text"},QueryEditorRows:{rows:"Query editor row"},QueryEditorRow:{actionButton:e=>`${e} query operation action`,title:e=>`Query editor row title ${e}`,container:e=>`Query editor row ${e}`},AlertTab:{content:"Alert editor tab content"},Alert:{alert:e=>`Alert ${e}`,alertV2:e=>`data-testid Alert ${e}`},TransformTab:{content:"Transform editor tab content",newTransform:e=>`New transform ${e}`,transformationEditor:e=>`Transformation editor ${e}`,transformationEditorDebugger:e=>`Transformation editor debugger ${e}`},Transforms:{card:e=>`New transform ${e}`,Reduce:{modeLabel:"Transform mode label",calculationsLabel:"Transform calculations label"},searchInput:"search transformations"},PageToolbar:{container:()=>".page-toolbar",item:e=>`${e}`},QueryEditorToolbarItem:{button:e=>`QueryEditor toolbar item button ${e}`},BackButton:{backArrow:"Go Back"},OptionsGroup:{group:e=>e?`Options group ${e}`:"Options group",toggle:e=>e?`Options group ${e} toggle`:"Options group toggle"},PluginVisualization:{item:e=>`Plugin visualization item ${e}`,current:()=>'[class*="-currentVisualizationItem"]'},Select:{option:"Select option",input:()=>'input[id*="time-options-input"]',singleValue:()=>'div[class*="-singleValue"]'},FieldConfigEditor:{content:"Field config editor content"},OverridesConfigEditor:{content:"Field overrides editor content"},FolderPicker:{container:"Folder picker select container",containerV2:"data-testid Folder picker select container",input:"Select a folder"},ReadonlyFolderPicker:{container:"data-testid Readonly folder picker select container"},DataSourcePicker:{container:"Data source picker select container",input:()=>'input[id="data-source-picker"]',inputV2:"Select a data source"},TimeZonePicker:{container:"Time zone picker select container",containerV2:"data-testid Time zone picker select container"},WeekStartPicker:{container:"Choose starting day of the week",containerV2:"data-testid Choose starting day of the week",placeholder:"Choose starting day of the week"},TraceViewer:{spanBar:"data-testid SpanBar--wrapper"},QueryField:{container:"Query field"},QueryBuilder:{queryPatterns:"Query patterns",labelSelect:"Select label",valueSelect:"Select value",matchOperatorSelect:"Select match operator"},ValuePicker:{button:e=>`Value picker button ${e}`,select:e=>`Value picker select ${e}`},Search:{section:"Search section",sectionV2:"data-testid Search section",items:"Search items",itemsV2:"data-testid Search items",cards:"data-testid Search cards",collapseFolder:e=>`data-testid Collapse folder ${e}`,expandFolder:e=>`data-testid Expand folder ${e}`,dashboardItem:e=>`${r.Search.dashboardItems} ${e}`,dashboardCard:e=>`data-testid Search card ${e}`,dashboardItems:"data-testid Dashboard search item"},DashboardLinks:{container:"data-testid Dashboard link container",dropDown:"data-testid Dashboard link dropdown",link:"data-testid Dashboard link"},LoadingIndicator:{icon:"Loading indicator"},CallToActionCard:{button:e=>`Call to action button ${e}`,buttonV2:e=>`data-testid Call to action button ${e}`},DataLinksContextMenu:{singleLink:"Data link"},CodeEditor:{container:"Code editor container"},DashboardImportPage:{textarea:"data-testid-import-dashboard-textarea",submit:"data-testid-load-dashboard"},ImportDashboardForm:{name:"data-testid-import-dashboard-title",submit:"data-testid-import-dashboard-submit"},PanelAlertTabContent:{content:"Unified alert editor tab content"},VisualizationPreview:{card:e=>`data-testid suggestion-${e}`},ColorSwatch:{name:"data-testid-colorswatch"},DashboardRow:{title:e=>`data-testid dashboard-row-title-${e}`},UserProfile:{profileSaveButton:"data-testid-user-profile-save",preferencesSaveButton:"data-testid-shared-prefs-save",orgsTable:"data-testid-user-orgs-table",sessionsTable:"data-testid-user-sessions-table"},FileUpload:{inputField:"data-testid-file-upload-input-field",fileNameSpan:"data-testid-file-upload-file-name"}},n={Login:{url:"/login",username:"Username input field",password:"Password input field",submit:"Login button",skip:"Skip change password button"},Home:{url:"/"},DataSource:{name:"Data source settings page name input field",delete:"Data source settings page Delete button",readOnly:"Data source settings page read only message",saveAndTest:"Data source settings page Save and Test button",alert:"Data source settings page Alert"},DataSources:{url:"/datasources",dataSources:e=>`Data source list item ${e}`},AddDataSource:{url:"/datasources/new",dataSourcePlugins:e=>`Data source plugin item ${e}`,dataSourcePluginsV2:e=>`Add data source ${e}`},ConfirmModal:{delete:"Confirm Modal Danger Button"},AddDashboard:{url:"/dashboard/new",addNewPanel:"Add new panel",addNewRow:"Add new row",addNewPanelLibrary:"Add new panel from panel library"},Dashboard:{url:e=>`/d/${e}`,DashNav:{nav:"Dashboard navigation",navV2:"data-testid Dashboard navigation",publicDashboardTag:"data-testid public dashboard tag"},SubMenu:{submenu:"Dashboard submenu",submenuItem:"data-testid template variable",submenuItemLabels:e=>`data-testid Dashboard template variables submenu Label ${e}`,submenuItemValueDropDownValueLinkTexts:e=>`data-testid Dashboard template variables Variable Value DropDown value link text ${e}`,submenuItemValueDropDownDropDown:"Variable options",submenuItemValueDropDownOptionTexts:e=>`data-testid Dashboard template variables Variable Value DropDown option text ${e}`},Settings:{General:{deleteDashBoard:"Dashboard settings page delete dashboard button",sectionItems:e=>`Dashboard settings section item ${e}`,saveDashBoard:"Dashboard settings aside actions Save button",saveAsDashBoard:"Dashboard settings aside actions Save As button",timezone:"Time zone picker select container",title:"Dashboard settings page title"},Annotations:{List:{addAnnotationCTA:r.CallToActionCard.button("Add annotation query"),addAnnotationCTAV2:r.CallToActionCard.buttonV2("Add annotation query")},Settings:{name:"Annotations settings name input"}},Variables:{List:{addVariableCTA:r.CallToActionCard.button("Add variable"),addVariableCTAV2:r.CallToActionCard.buttonV2("Add variable"),newButton:"Variable editor New variable button",table:"Variable editor Table",tableRowNameFields:e=>`Variable editor Table Name field ${e}`,tableRowDefinitionFields:e=>`Variable editor Table Definition field ${e}`,tableRowArrowUpButtons:e=>`Variable editor Table ArrowUp button ${e}`,tableRowArrowDownButtons:e=>`Variable editor Table ArrowDown button ${e}`,tableRowDuplicateButtons:e=>`Variable editor Table Duplicate button ${e}`,tableRowRemoveButtons:e=>`Variable editor Table Remove button ${e}`},Edit:{General:{headerLink:"Variable editor Header link",modeLabelNew:"Variable editor Header mode New",modeLabelEdit:"Variable editor Header mode Edit",generalNameInput:"Variable editor Form Name field",generalNameInputV2:"data-testid Variable editor Form Name field",generalTypeSelect:"Variable editor Form Type select",generalTypeSelectV2:"data-testid Variable editor Form Type select",generalLabelInput:"Variable editor Form Label field",generalLabelInputV2:"data-testid Variable editor Form Label field",generalHideSelect:"Variable editor Form Hide select",generalHideSelectV2:"data-testid Variable editor Form Hide select",selectionOptionsMultiSwitch:"Variable editor Form Multi switch",selectionOptionsIncludeAllSwitch:"Variable editor Form IncludeAll switch",selectionOptionsCustomAllInput:"Variable editor Form IncludeAll field",selectionOptionsCustomAllInputV2:"data-testid Variable editor Form IncludeAll field",previewOfValuesOption:"Variable editor Preview of Values option",submitButton:"Variable editor Submit button"},QueryVariable:{queryOptionsDataSourceSelect:r.DataSourcePicker.container,queryOptionsRefreshSelect:"Variable editor Form Query Refresh select",queryOptionsRefreshSelectV2:"data-testid Variable editor Form Query Refresh select",queryOptionsRegExInput:"Variable editor Form Query RegEx field",queryOptionsRegExInputV2:"data-testid Variable editor Form Query RegEx field",queryOptionsSortSelect:"Variable editor Form Query Sort select",queryOptionsSortSelectV2:"data-testid Variable editor Form Query Sort select",queryOptionsQueryInput:"Variable editor Form Default Variable Query Editor textarea",valueGroupsTagsEnabledSwitch:"Variable editor Form Query UseTags switch",valueGroupsTagsTagsQueryInput:"Variable editor Form Query TagsQuery field",valueGroupsTagsTagsValuesQueryInput:"Variable editor Form Query TagsValuesQuery field"},ConstantVariable:{constantOptionsQueryInput:"Variable editor Form Constant Query field",constantOptionsQueryInputV2:"data-testid Variable editor Form Constant Query field"},DatasourceVariable:{datasourceSelect:"data-testid datasource variable datasource type"},TextBoxVariable:{textBoxOptionsQueryInput:"Variable editor Form TextBox Query field",textBoxOptionsQueryInputV2:"data-testid Variable editor Form TextBox Query field"},CustomVariable:{customValueInput:"data-testid custom-variable-input"},IntervalVariable:{intervalsValueInput:"data-testid interval variable intervals input"}}}}},Dashboards:{url:"/dashboards",dashboards:e=>`Dashboard search item ${e}`},SaveDashboardAsModal:{newName:"Save dashboard title field",save:"Save dashboard button"},SaveDashboardModal:{save:"Dashboard settings Save Dashboard Modal Save button",saveVariables:"Dashboard settings Save Dashboard Modal Save variables checkbox",saveTimerange:"Dashboard settings Save Dashboard Modal Save timerange checkbox"},SharePanelModal:{linkToRenderedImage:"Link to rendered image"},ShareDashboardModal:{shareButton:"Share dashboard or panel",PublicDashboard:{Tab:"Tab Public Dashboard",WillBePublicCheckbox:"data-testid public dashboard will be public checkbox",LimitedDSCheckbox:"data-testid public dashboard limited datasources checkbox",CostIncreaseCheckbox:"data-testid public dashboard cost may increase checkbox",EnableSwitch:"data-testid public dashboard on off switch",SaveConfigButton:"data-testid public dashboard save config button",CopyUrlInput:"data-testid public dashboard copy url input",CopyUrlButton:"data-testid public dashboard copy url button",TemplateVariablesWarningAlert:"data-testid public dashboard disabled template variables alert"}},Explore:{url:"/explore",General:{container:"data-testid Explore",graph:"Explore Graph",table:"Explore Table",scrollView:"data-testid explorer scroll view"}},SoloPanel:{url:e=>`/d-solo/${e}`},PluginsList:{page:"Plugins list page",list:"Plugins list",listItem:"Plugins list item",signatureErrorNotice:"Unsigned plugins notice"},PluginPage:{page:"Plugin page",signatureInfo:"Plugin signature info",disabledInfo:"Plugin disabled info"},PlaylistForm:{name:"Playlist name",interval:"Playlist interval",itemRow:"Playlist item row",itemIdType:"Playlist item dashboard by ID type",itemTagType:"Playlist item dashboard by Tag type",itemMoveUp:"Move playlist item order up",itemMoveDown:"Move playlist item order down",itemDelete:"Delete playlist item"}},o={pages:n,components:r};t.selectors=o}],l={};function s(e){var t=l[e];if(void 0!==t)return t.exports;var r=l[e]={exports:{}};return i[e](r,r.exports,s),r.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var c={};return(()=>{s.r(c),s.d(c,{plugin:()=>Jr});var e=s(4),t={type:"all",query:"* | select count(*) as c, __time__-__time__%60 as t group by t",xcol:"t",ycol:"",logsPerPage:100,currentPage:1},r={type:"all",query:"",xcol:"",ycol:"",logsPerPage:100,currentPage:1},n=s(5),o=s(3),a=s.n(o),i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},i(e,t)};function l(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function u(e){return"function"==typeof e}var p=!1,d={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e);p=e},get useDeprecatedSynchronousErrorHandling(){return p}};function f(e){setTimeout((function(){throw e}),0)}var y={closed:!0,next:function(e){},error:function(e){if(d.useDeprecatedSynchronousErrorHandling)throw e;f(e)},complete:function(){}},h=function(){return Array.isArray||function(e){return e&&"number"==typeof e.length}}();var b=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),m=b,g=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var t;if(!this.closed){var r,n=this,o=n._parentOrParents,a=n._ctorUnsubscribe,i=n._unsubscribe,l=n._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,o instanceof e)o.remove(this);else if(null!==o)for(var s=0;s<o.length;++s){o[s].remove(this)}if(u(i)){a&&(this._unsubscribe=void 0);try{i.call(this)}catch(e){t=e instanceof m?v(e.errors):[e]}}if(h(l)){s=-1;for(var c=l.length;++s<c;){var p=l[s];if(null!==(r=p)&&"object"==typeof r)try{p.unsubscribe()}catch(e){t=t||[],e instanceof m?t=t.concat(v(e.errors)):t.push(e)}}}if(t)throw new m(t)}},e.prototype.add=function(t){var r=t;if(!t)return e.EMPTY;switch(typeof t){case"function":r=new e(t);case"object":if(r===this||r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof e)){var n=r;(r=new e)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var o=r._parentOrParents;if(null===o)r._parentOrParents=this;else if(o instanceof e){if(o===this)return r;r._parentOrParents=[o,this]}else{if(-1!==o.indexOf(this))return r;o.push(this)}var a=this._subscriptions;return null===a?this._subscriptions=[r]:a.push(r),r},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();function v(e){return e.reduce((function(e,t){return e.concat(t instanceof m?t.errors:t)}),[])}var w=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),S=function(e){function t(r,n,o){var a=e.call(this)||this;switch(a.syncErrorValue=null,a.syncErrorThrown=!1,a.syncErrorThrowable=!1,a.isStopped=!1,arguments.length){case 0:a.destination=y;break;case 1:if(!r){a.destination=y;break}if("object"==typeof r){r instanceof t?(a.syncErrorThrowable=r.syncErrorThrowable,a.destination=r,r.add(a)):(a.syncErrorThrowable=!0,a.destination=new O(a,r));break}default:a.syncErrorThrowable=!0,a.destination=new O(a,r,n,o)}return a}return l(t,e),t.prototype[w]=function(){return this},t.create=function(e,r,n){var o=new t(e,r,n);return o.syncErrorThrowable=!1,o},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(g),O=function(e){function t(t,r,n,o){var a,i=e.call(this)||this;i._parentSubscriber=t;var l=i;return u(r)?a=r:r&&(a=r.next,n=r.error,o=r.complete,r!==y&&(u((l=Object.create(r)).unsubscribe)&&i.add(l.unsubscribe.bind(l)),l.unsubscribe=i.unsubscribe.bind(i))),i._context=l,i._next=a,i._error=n,i._complete=o,i}return l(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;d.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,r=d.useDeprecatedSynchronousErrorHandling;if(this._error)r&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)r?(t.syncErrorValue=e,t.syncErrorThrown=!0):f(e),this.unsubscribe();else{if(this.unsubscribe(),r)throw e;f(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var r=function(){return e._complete.call(e._context)};d.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),d.useDeprecatedSynchronousErrorHandling)throw e;f(e)}},t.prototype.__tryOrSetError=function(e,t,r){if(!d.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,r)}catch(t){return d.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(f(t),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(S);var E=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new x(e,this.project,this.thisArg))},e}(),x=function(e){function t(t,r,n){var o=e.call(this,t)||this;return o.project=r,o.count=0,o.thisArg=n||o,o}return l(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(S);function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function T(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=C(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw a}}}}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],s=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return l}}(e,t)||C(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){if(e){if("string"==typeof e)return I(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?I(e,t):void 0}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function D(){D=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function c(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),l=new T(o||[]);return n(i,"_invoke",{value:S(e,r,l)}),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var p={};function d(){}function f(){}function y(){}var h={};s(h,a,(function(){return this}));var b=Object.getPrototypeOf,m=b&&b(b(F([])));m&&m!==t&&r.call(m,a)&&(h=m);var g=y.prototype=d.prototype=Object.create(h);function v(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,a,i,l){var s=u(e[n],e,a);if("throw"!==s.type){var c=s.arg,p=c.value;return p&&"object"==_(p)&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){o("next",e,i,l)}),(function(e){o("throw",e,i,l)})):t.resolve(p).then((function(e){c.value=e,i(c)}),(function(e){return o("throw",e,i,l)}))}l(s.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function S(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var l=O(i,r);if(l){if(l===p)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===p)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=u(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function F(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return f.prototype=y,n(g,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:f,configurable:!0}),f.displayName=s(y,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,s(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},v(w.prototype),s(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(c(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(g),s(g,l,"Generator"),s(g,a,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=F,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(l&&s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:F(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function P(e,t,r,n,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return void r(e)}l.done?t(s):Promise.resolve(s).then(n,o)}function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},j.apply(this,arguments)}function k(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,a=void 0,a=function(e,t){if("object"!==_(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===_(a)?a:String(a)),n)}var o,a}function A(){return A="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=N(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},A.apply(this,arguments)}function R(e,t){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},R(e,t)}function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=N(e);if(t){var o=N(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function N(e){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},N(e)}var L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}(l,e);var r,o,a,i=V(l);function l(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),i.call(this,e)}return r=l,o=[{key:"query",value:function(e){return e.targets.forEach((function(t){t.query=z(t,e)})),"trace"===e.targets[0].xcol?A(N(l.prototype),"query",this).call(this,e).pipe((t=$,function(e){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return e.lift(new E(t,r))})):A(N(l.prototype),"query",this).call(this,e);var t,r}},{key:"metricFindQuery",value:function(e,r){var o=j({},t,"string"==typeof e?{query:e}:e),a=o.type,i=o.logstore,l=o.queryType,s=o.legendFormat,c=o.step,u={from:r.range.from.valueOf().toString(),to:r.range.to.valueOf().toString(),queries:[{datasource:{type:this.type,uid:this.uid},datasourceId:this.id,query:z(o.query||"",r),type:a,logstore:i,queryType:l,legendFormat:s,step:c}]};return new Promise(function(){var e,t=(e=D().mark((function e(t){var r,o,a,i;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.prev=1,e.next=4,(0,n.getBackendSrv)().post("/api/ds/query",u);case 4:a=e.sent,r=null!==(o=a.results.A.frames)&&void 0!==o?o:[],e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1);case 11:i=W(r),t(i);case 13:case"end":return e.stop()}}),e,null,[[1,8]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){P(a,n,o,i,l,"next",e)}function l(e){P(a,n,o,i,l,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}())}}],o&&k(r.prototype,o),a&&k(r,a),Object.defineProperty(r,"prototype",{writable:!1}),l}(n.DataSourceWithBackend);function B(e,t){return{key:e,value:t}}function M(e,t){var r,n,o=JSON.parse(null===(r=e.get("resource"))||void 0===r?void 0:r.get(t)),a=Array.from(Object.entries(o),(function(e){var t=F(e,2);return B(t[0],t[1])}));return a.push(B("host",null===(n=e.get("host"))||void 0===n?void 0:n.get(t))),a}function q(e,t){var r,n,o,a=JSON.parse(null===(r=e.get("attribute"))||void 0===r?void 0:r.get(t)),i=Array.from(Object.entries(a),(function(e){var t=F(e,2);return B(t[0],t[1])}));return i.push(B("statusCode",null===(n=e.get("statusCode"))||void 0===n?void 0:n.get(t))),i.push(B("statusMessage",null===(o=e.get("statusMessage"))||void 0===o?void 0:o.get(t))),i}function Q(e,t){var r,n,o=[],a=T(JSON.parse(null===(r=e.get("logs"))||void 0===r?void 0:r.get(t)));try{for(a.s();!(n=a.n()).done;){var i=n.value,l=new Map(Object.entries(i)),s=Array.from(Object.entries(i),(function(e){var t=F(e,2);return B(t[0],t[1])})),c=l.get("time");void 0!==c&&o.push({timestamp:Number(c)/1e6,fields:s})}}catch(e){a.e(e)}finally{a.f()}return o}function K(t){var r,n=function(e){for(var t=[],r=e.fields,n=new Map(r.map((function(e){return[e.name,e.values]}))),o=0;o<e.length;o++){var a,i,l,s,c,u,p,d,f={traceID:null===(a=n.get("traceID"))||void 0===a?void 0:a.get(o),spanID:null===(i=n.get("spanID"))||void 0===i?void 0:i.get(o),parentSpanID:null===(l=n.get("parentSpanID"))||void 0===l?void 0:l.get(o),operationName:null===(s=n.get("operationName"))||void 0===s?void 0:s.get(o),serviceName:null===(c=n.get("serviceName"))||void 0===c?void 0:c.get(o),serviceTags:M(n,o),startTime:null===(u=n.get("startTime"))||void 0===u?void 0:u.get(o),duration:null===(p=n.get("duration"))||void 0===p?void 0:p.get(o),tags:q(n,o),errorIconColor:"ERROR"===(null===(d=n.get("statusCode"))||void 0===d?void 0:d.get(o))?"#f00":"",logs:Q(n,o)};t.push(f)}return t}(t),o=new e.MutableDataFrame({fields:[{name:"traceID",type:e.FieldType.string},{name:"spanID",type:e.FieldType.string},{name:"parentSpanID",type:e.FieldType.string},{name:"operationName",type:e.FieldType.string},{name:"serviceName",type:e.FieldType.string},{name:"serviceTags",type:e.FieldType.other},{name:"startTime",type:e.FieldType.number},{name:"duration",type:e.FieldType.number},{name:"logs",type:e.FieldType.other},{name:"tags",type:e.FieldType.other},{name:"errorIconColor",type:e.FieldType.string}],meta:{preferredVisualisationType:"trace"}}),a=T(n);try{for(a.s();!(r=a.n()).done;){var i=r.value;o.add(i)}}catch(e){a.e(e)}finally{a.f()}return o}function $(e){return{data:[K(e.data[0])]}}function W(e){if(!e||!Array.isArray(e)||0===(null==e?void 0:e.length))return[];var t,r=[],n=T(e);try{for(n.s();!(t=n.n()).done;){var o,i,l=t.value;if((null===(o=l.data)||void 0===o||null===(i=o.values)||void 0===i?void 0:i.length)>0){var s=l.data.values;if(2===s.length)for(var c=0;c<s[0].length;c++)r.push({text:s[0][c],value:s[1][c]});else for(var u=function(e){var t=s[0][e];if(t&&t.text&&t.value)r.push({text:t.text,value:t.value});else if(a().isObject(t))r.push({text:U(t),value:e});else{var n,o,i=s.reduce((function(t,r){return t+(r[e]+" ")}),"");r.push({text:null==i||null===(n=i.trim)||void 0===n?void 0:n.call(i),value:null==i||null===(o=i.trim)||void 0===o?void 0:o.call(i)})}},p=0;p<s[0].length;p++)u(p)}}}catch(e){n.e(e)}finally{n.f()}return r}function U(e){try{return JSON.stringify(e)}catch(t){return e}}function z(e,t){if("string"==typeof e||!e.hide){var r;r="string"==typeof e?e:e.query;var o=(0,n.getTemplateSrv)().replace(r,t.scopedVars,(function(e,t){if("object"===_(e)&&(t.multi||t.includeAll)){var r=[];return e.forEach((function(e){t.name===t.label||t.description&&t.description.indexOf("field_search")>=0?r.push('"'+t.name+'":"'+e+'"'):r.push(e)})),r.join(" OR ")}return a().isArray(e)?e.join(" OR "):e})),i=o.match(/\$([0-9]+)([dmhs])/g);return a()(i).forEach((function(e){var t=e,r=1;-1!==(e=e.replace("$","")).indexOf("s")?r=1:-1!==e.indexOf("m")?r=60:-1!==e.indexOf("h")?r=3600:-1!==e.indexOf("d")&&(r=86400),e=e.replace(/[smhd]/g,"");var n=parseInt(e,10);n*=r,o=o.replace(t,String(n))})),-1!==o.indexOf("#time_end")&&(o=o.replace("#time_end",String(t.range.to.unix()/1e3))),-1!==o.indexOf("#time_begin")&&(o=o.replace("#time_begin",String(t.range.from.unix()/1e3))),o}}var H=s(0),G=s.n(H),J=s(1),Y=s(2),X=Object.defineProperty,Z=Object.defineProperties,ee=Object.getOwnPropertyDescriptors,te=Object.getOwnPropertySymbols,re=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable,oe=(e,t,r)=>t in e?X(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ae=(e,t)=>{for(var r in t||(t={}))re.call(t,r)&&oe(e,r,t[r]);if(te)for(var r of te(t))ne.call(t,r)&&oe(e,r,t[r]);return e};const ie=({dataSourceName:e,docsLink:t,hasRequiredFields:r=!0,className:n})=>{const o=(0,J.useTheme2)(),a={container:(0,Y.css)({p:{margin:0},"p + p":{marginTop:o.spacing(2)}}),text:(0,Y.css)((i=ae({},o.typography.body),l={color:o.colors.text.secondary,a:(0,Y.css)({color:o.colors.text.link,textDecoration:"underline","&:hover":{textDecoration:"none"}})},Z(i,ee(l))))};var i,l;return G().createElement("div",{className:(0,Y.cx)(a.container,n)},G().createElement("p",{className:a.text},"Before you can use the ",e," data source, you must configure it below or in the config file. For detailed instructions,"," ",G().createElement("a",{href:t,target:"_blank",rel:"noreferrer"},"view the documentation"),"."),r&&G().createElement("p",{className:a.text},G().createElement("i",null,"Fields marked with * are required")))};var le=Object.defineProperty,se=Object.defineProperties,ce=Object.getOwnPropertyDescriptors,ue=Object.getOwnPropertySymbols,pe=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable,fe=(e,t,r)=>t in e?le(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ye=(e,t)=>{for(var r in t||(t={}))pe.call(t,r)&&fe(e,r,t[r]);if(ue)for(var r of ue(t))de.call(t,r)&&fe(e,r,t[r]);return e};const he=({children:e,title:t,description:r,isCollapsible:n=!1,isInitiallyOpen:o=!0,kind:a="section",className:i})=>{const{colors:l,typography:s,spacing:c}=(0,J.useTheme2)(),[u,p]=(0,H.useState)(!n||o),d=u?"angle-up":"angle-down",f="sub-section"===a,y=`${u?"Collapse":"Expand"} section ${t}`,h={header:(0,Y.css)({display:"flex",justifyContent:"space-between",alignItems:"center"}),title:(0,Y.css)({margin:0}),subtitle:(0,Y.css)({margin:0,fontWeight:s.fontWeightRegular}),descriptionText:(0,Y.css)((b=ye({marginTop:c(f?.25:.5),marginBottom:0},s.bodySmall),m={color:l.text.secondary},se(b,ce(m)))),content:(0,Y.css)({marginTop:c(2)})};var b,m;return G().createElement("div",{className:i},G().createElement("div",{className:h.header},"section"===a?G().createElement("h3",{className:h.title},t):G().createElement("h6",{className:h.subtitle},t),n&&G().createElement(J.IconButton,{name:d,onClick:()=>p(!u),type:"button",size:"xl","aria-label":y})),r&&G().createElement("p",{className:h.descriptionText},r),u&&G().createElement("div",{className:h.content},e))};var be=Object.defineProperty,me=Object.defineProperties,ge=Object.getOwnPropertyDescriptors,ve=Object.getOwnPropertySymbols,we=Object.prototype.hasOwnProperty,Se=Object.prototype.propertyIsEnumerable,Oe=(e,t,r)=>t in e?be(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Ee=e=>{var t,r=e,{children:n}=r,o=((e,t)=>{var r={};for(var n in e)we.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&ve)for(var n of ve(e))t.indexOf(n)<0&&Se.call(e,n)&&(r[n]=e[n]);return r})(r,["children"]);return G().createElement(he,(t=((e,t)=>{for(var r in t||(t={}))we.call(t,r)&&Oe(e,r,t[r]);if(ve)for(var r of ve(t))Se.call(t,r)&&Oe(e,r,t[r]);return e})({},o),me(t,ge({kind:"section"}))),n)};function xe(){return xe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xe.apply(this,arguments)}var _e=function(e){var t=e.header,r=e.onChange,n=e.onBlur,o=e.onDelete,a=e.readOnly,i=(0,J.useTheme2)().spacing,l={inlineFieldNoMarginRight:(0,Y.css)({marginRight:0}),inlineFieldWithSecret:(0,Y.css)({'[class$="layoutChildrenWrapper"]:first-child':{flexGrow:1}})},s={container:(0,Y.css)({alignItems:"center"}),input:(0,Y.css)({minWidth:"100%"}),headerNameField:(0,Y.css)({width:"40%",marginRight:0,paddingRight:i(1)}),headerValueField:(0,Y.css)({width:"45%",marginRight:0}),removeHeaderBtn:(0,Y.css)({margin:"0 0 3px 10px"})};return G().createElement(G().Fragment,null,G().createElement(J.InlineFieldRow,{className:s.container},G().createElement(J.InlineField,{label:"Header",labelWidth:9,grow:!0,className:s.headerNameField,htmlFor:"custom-header-".concat(t.id,"-name-input"),disabled:a},G().createElement(J.Input,{id:"custom-header-".concat(t.id,"-name-input"),placeholder:"X-Custom-Header",value:t.name,width:12,onChange:function(e){return r(xe({},t,{name:e.currentTarget.value}))},onBlur:n,className:s.input})),G().createElement(J.InlineField,{label:"Value",labelWidth:9,grow:!0,className:(0,Y.cx)(l.inlineFieldWithSecret,s.headerValueField),htmlFor:"custom-header-".concat(t.id,"-value-input"),disabled:a},G().createElement(J.Input,{id:"custom-header-".concat(t.id,"-value-input"),placeholder:"Header value",value:t.value,width:12,onChange:function(e){return r(xe({},t,{value:e.currentTarget.value}))},onReset:a?function(){}:function(){return r(xe({},t,{configured:!1,value:""}))},onBlur:n,className:s.input})),G().createElement(J.IconButton,{name:"trash-alt",tooltip:"Remove header",tooltipPlacement:"top",className:s.removeHeaderBtn,onClick:o,type:"button",disabled:a})))},Te=Object.defineProperty,Fe=Object.defineProperties,Ce=Object.getOwnPropertyDescriptors,Ie=Object.getOwnPropertySymbols,De=Object.prototype.hasOwnProperty,Pe=Object.prototype.propertyIsEnumerable,je=(e,t,r)=>t in e?Te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const ke=e=>{var t,r=e,{children:n}=r,o=((e,t)=>{var r={};for(var n in e)De.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Ie)for(var n of Ie(e))t.indexOf(n)<0&&Pe.call(e,n)&&(r[n]=e[n]);return r})(r,["children"]);return G().createElement(he,(t=((e,t)=>{for(var r in t||(t={}))De.call(t,r)&&je(e,r,t[r]);if(Ie)for(var r of Ie(t))Pe.call(t,r)&&je(e,r,t[r]);return e})({},o),Fe(t,Ce({kind:"sub-section"}))),n)};function Ae(e){return function(e){if(Array.isArray(e))return Le(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ne(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Re(){return Re=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Re.apply(this,arguments)}function Ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],s=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return l}}(e,t)||Ne(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ne(e,t){if(e){if("string"==typeof e)return Le(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Le(e,t):void 0}}function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Be,Me,qe=function(e){var t=e.headers,r=e.onChange,n=e.readOnly,o=(0,J.useTheme2)().spacing,a=Ve((0,H.useState)(t.map((function(e){return Re({},e,{id:Qe()})}))),2),i=a[0],l=a[1];(0,H.useEffect)((function(){l((function(e){var r=!1,n=e.map((function(e){var n,o=null===(n=t.find((function(t){return t.name===e.name})))||void 0===n?void 0:n.configured;return void 0!==o&&e.configured!==o?(r=!0,Re({},e,{configured:o})):e}));return r?n:e}))}),[t]);var s=function(){r(i.map((function(e){return{name:e.name,value:e.value,configured:e.configured}})))},c={container:(0,Y.css)({marginTop:o(3)}),addHeaderButton:(0,Y.css)({marginTop:o(1.5)})};return G().createElement("div",{className:c.container},G().createElement(ke,{title:"HTTP headers",description:"Pass along additional context and metadata about the request/response for Metricstore(PromQL)",isCollapsible:!0,isInitiallyOpen:!0},G().createElement("div",null,i.map((function(e){return G().createElement(_e,{key:e.id,header:e,onChange:function(e){return function(e,t){l(i.map((function(r){return r.id===e?Re({},t):r})))}(e.id,e)},onDelete:function(){return function(e){var t=i.findIndex((function(t){return t.id===e}));if(-1!==t){var n=Ae(i);n.splice(t,1),l(n),r(n.map((function(e){return{name:e.name,value:e.value,configured:e.configured}})))}}(e.id)},onBlur:s,readOnly:n})}))),G().createElement("div",{className:c.addHeaderButton},G().createElement(J.Button,{icon:"plus",variant:"secondary",fill:"outline",onClick:function(){l([].concat(Ae(i),[{id:Qe(),name:"",value:"",configured:!1}]))},disabled:n},0===i.length?"Add header":"Add another header"))))};function Qe(){return Math.random().toString(16).slice(2)}function Ke(e){return Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ke(e)}function $e(){return $e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$e.apply(this,arguments)}function We(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ye(n.key),n)}}function Ue(e,t){return Ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ue(e,t)}function ze(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ge(e);if(t){var o=Ge(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Ke(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return He(e)}(this,r)}}function He(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ge(e){return Ge=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ge(e)}function Je(e,t,r){return(t=Ye(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ye(e){var t=function(e,t){if("object"!==Ke(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Ke(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ke(t)?t:String(t)}var Xe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ue(e,t)}(a,e);var t,r,n,o=ze(a);function a(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Je(He(e=o.call.apply(o,[this].concat(r))),"onEndpointChange",(function(t){var r=e.props,n=r.onOptionsChange,o=r.options;o.url=t.target.value,n($e({},o))})),Je(He(e),"onProjectChange",(function(t){var r=e.props,n=r.onOptionsChange,o=r.options,a=$e({},o.jsonData,{project:t.target.value});n($e({},o,{jsonData:a}))})),Je(He(e),"onLogStoreChange",(function(t){var r=e.props,n=r.onOptionsChange,o=r.options,a=$e({},o.jsonData,{logstore:t.target.value});n($e({},o,{jsonData:a}))})),Je(He(e),"onRoleArnChange",(function(t){var r=e.props,n=r.onOptionsChange,o=r.options,a=$e({},o.jsonData,{roleArn:t.target.value});n($e({},o,{jsonData:a}))})),Je(He(e),"onAKIDChange",(function(t){var r=e.props,n=r.onOptionsChange,o=r.options,a="";void 0!==o.secureJsonData&&o.secureJsonData.hasOwnProperty("accessKeySecret")&&(a=o.secureJsonData.accessKeySecret),n($e({},o,{secureJsonData:{accessKeyId:t.target.value,accessKeySecret:a}}))})),Je(He(e),"onAKSecretChange",(function(t){var r=e.props,n=r.onOptionsChange,o=r.options,a="";void 0!==o.secureJsonData&&o.secureJsonData.hasOwnProperty("accessKeyId")&&(a=o.secureJsonData.accessKeyId),n($e({},o,{secureJsonData:{accessKeyId:a,accessKeySecret:t.target.value}}))})),Je(He(e),"onResetAKID",(function(){var t=e.props,r=t.onOptionsChange,n=t.options;r($e({},n,{secureJsonFields:$e({},n.secureJsonFields,{accessKeyId:!1}),secureJsonData:$e({},n.secureJsonData,{accessKeyId:""})}))})),Je(He(e),"onResetAKSecret",(function(){var t=e.props,r=t.onOptionsChange,n=t.options;r($e({},n,{secureJsonFields:$e({},n.secureJsonFields,{accessKeySecret:!1}),secureJsonData:$e({},n.secureJsonData,{accessKeySecret:""})}))})),Je(He(e),"onHeadersChange",(function(t){var r=e.props,n=r.onOptionsChange,o=r.options,a=$e({},o.jsonData,{headers:t});n($e({},o,{jsonData:a}))})),e}return t=a,r=[{key:"render",value:function(){var e=this.props.options,t=e.jsonData,r=e.secureJsonFields,n=e.url,o=e.secureJsonData||{};return G().createElement(G().Fragment,null,Be||(Be=G().createElement(ie,{docsLink:"https://help.aliyun.com/zh/sls/developer-reference/connect-log-service-to-grafana",dataSourceName:"SLS"})),G().createElement("hr",{style:{margin:"20px 0"}}),G().createElement(Ee,{title:"Connection"},G().createElement(J.InlineField,{htmlFor:"connection-url",label:"Endpoint",labelWidth:24,tooltip:G().createElement(G().Fragment,null,"Specify a complete Endpoint URL",Me||(Me=G().createElement("br",null)),"(for example: cn-hangzhou.log.aliyuncs.com)"),grow:!0,required:!0,interactive:!0},G().createElement(J.Input,{id:"connection-url","aria-label":"Project ",onChange:this.onEndpointChange,value:n||"",placeholder:" Endpoint"})),G().createElement(J.InlineField,{htmlFor:"connection-project",label:"Project",tooltip:"Project",labelWidth:24,grow:!0,required:!0,interactive:!0},G().createElement(J.Input,{id:"connection-url","aria-label":"Project",onChange:this.onProjectChange,value:t.project||"",placeholder:" Project"})),G().createElement(J.InlineField,{htmlFor:"connection-AccessKeyID",label:"AccessKeyID",labelWidth:24,tooltip:"AccessKeyID",grow:!0,required:!0,interactive:!0},G().createElement(J.SecretInput,{isConfigured:r&&r.accessKeyId,value:o.accessKeyId||"",label:"AccessKeyID",placeholder:"AccessKeyID",onReset:this.onResetAKID,onChange:this.onAKIDChange})),G().createElement(J.InlineField,{htmlFor:"connection-AccessKeySecret",label:"AccessKeySecret",labelWidth:24,tooltip:"AccessKeySecret",grow:!0,required:!0,interactive:!0},G().createElement(J.SecretInput,{isConfigured:r&&r.accessKeySecret,value:o.accessKeySecret||"",label:"AccessKeySecret",placeholder:"AccessKeySecret",onReset:this.onResetAKSecret,onChange:this.onAKSecretChange}))),G().createElement("hr",{style:{margin:"20px 0"}}),G().createElement(Ee,{title:"Other"},G().createElement(J.InlineField,{style:{marginTop:"8px"},htmlFor:"connection-logstore",label:"Default Logstore",labelWidth:24,grow:!0,interactive:!0},G().createElement(J.Input,{id:"other-logstore-url","aria-label":"logstore",onChange:this.onLogStoreChange,value:t.logstore||""})),G().createElement(J.InlineField,{style:{marginTop:"8px"},htmlFor:"connection-roleArn",label:"RoleArn",labelWidth:24,grow:!0,interactive:!0},G().createElement(J.Input,{id:"other-roleArn-url","aria-label":"roleArn",onChange:this.onRoleArnChange,value:t.roleArn||"",placeholder:"STS(, optional)"})),G().createElement(qe,{headers:t.headers||[],onChange:this.onHeadersChange,readOnly:!1})))}}],r&&We(t.prototype,r),n&&We(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(H.PureComponent),Ze=Object.getOwnPropertySymbols,et=Object.prototype.hasOwnProperty,tt=Object.prototype.propertyIsEnumerable;const rt=e=>{var t=e,{children:r}=t,n=((e,t)=>{var r={};for(var n in e)et.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Ze)for(var n of Ze(e))t.indexOf(n)<0&&tt.call(e,n)&&(r[n]=e[n]);return r})(t,["children"]);const o=(0,J.useStyles2)((0,H.useCallback)((e=>nt(e,n)),[n]));return G().createElement("div",{className:o.root},r)},nt=(e,t)=>{var r,n,o;return{root:(0,Y.css)({display:"flex",flexDirection:null!=(r=t.direction)?r:"row",flexWrap:null==(n=t.wrap)||n?"wrap":void 0,alignItems:t.alignItems,gap:e.spacing(null!=(o=t.gap)?o:2),flexGrow:t.flexGrow})}},ot=({children:e})=>{const t=(0,J.useStyles2)(at);return G().createElement("div",{className:t.root},G().createElement(rt,{gap:2},e))},at=e=>({root:(0,Y.css)({padding:e.spacing(1),backgroundColor:e.colors.background.secondary,borderRadius:e.shape.borderRadius(1)})});var it=function(e,t){return"boolean"==typeof t?t:!e};const lt=function(e){return(0,H.useReducer)(it,e)};function st({title:e,children:t,collapsedInfo:r,queryStats:o}){const[a,i]=lt(!1),l=(0,J.useStyles2)(ct);return G().createElement("div",{className:l.wrapper},G().createElement(J.Collapse,{className:l.collapse,collapsible:!0,isOpen:a,onToggle:i,label:G().createElement(rt,{gap:0},G().createElement("h6",{className:l.title},e),!a&&G().createElement("div",{className:l.description},r.map(((e,t)=>G().createElement("span",{key:t},e)))))},G().createElement("div",{className:l.body},t)),o&&n.config.featureToggles.lokiQuerySplitting&&G().createElement(J.Tooltip,{content:"Note: the query will be split into multiple parts and executed in sequence. Query limits will only apply each individual part."},G().createElement(J.Icon,{tabIndex:0,name:"info-circle",className:l.tooltip,size:"sm"})),o&&G().createElement("p",{className:l.stats},ut(o)))}const ct=e=>({collapse:(0,Y.css)({backgroundColor:"unset",border:"unset",marginBottom:0,"> button":{padding:e.spacing(0,1)}}),wrapper:(0,Y.css)({width:"100%",display:"flex",justifyContent:"space-between",alignItems:"baseline"}),title:(0,Y.css)({flexGrow:1,overflow:"hidden",fontSize:e.typography.bodySmall.fontSize,fontWeight:e.typography.fontWeightMedium,margin:0}),description:(0,Y.css)({color:e.colors.text.secondary,fontSize:e.typography.bodySmall.fontSize,fontWeight:e.typography.bodySmall.fontWeight,paddingLeft:e.spacing(2),gap:e.spacing(2),display:"flex"}),body:(0,Y.css)({display:"flex",gap:e.spacing(2),flexWrap:"wrap"}),stats:(0,Y.css)({margin:"0px",color:e.colors.text.secondary,fontSize:e.typography.bodySmall.fontSize}),tooltip:(0,Y.css)({marginRight:e.spacing(.25)})}),ut=e=>e.message?e.message:`This query will process approximately ${pt(e)}.`,pt=t=>{const{text:r,suffix:n}=(0,e.getValueFormat)("bytes")(t.bytes,1);return r+n},dt=({v:e=0,h:t=0,layout:r="block"})=>{const n=(0,J.useStyles2)((0,H.useCallback)((n=>ft(n,{v:e,h:t,layout:r})),[e,t,r]));return G().createElement("span",{className:(0,Y.cx)(n.wrapper)})},ft=(e,t)=>{var r,n;return{wrapper:(0,Y.css)([{paddingRight:e.spacing(null!=(r=t.h)?r:0),paddingBottom:e.spacing(null!=(n=t.v)?n:0)},"inline"===t.layout&&{display:"inline-block"},"block"===t.layout&&{display:"block"}])}};var yt=Object.defineProperty,ht=Object.getOwnPropertySymbols,bt=Object.prototype.hasOwnProperty,mt=Object.prototype.propertyIsEnumerable,gt=(e,t,r)=>t in e?yt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const vt=e=>{var t;const r=e,{label:n,optional:o,tooltip:a,tooltipInteractive:i,children:l,width:s}=r,c=((e,t)=>{var r={};for(var n in e)bt.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&ht)for(var n of ht(e))t.indexOf(n)<0&&mt.call(e,n)&&(r[n]=e[n]);return r})(r,["label","optional","tooltip","tooltipInteractive","children","width"]),u=(0,J.useStyles2)((0,H.useCallback)((e=>wt(e,s)),[s])),p=(null==c?void 0:c.htmlFor)||(null==(t=J.ReactUtils)?void 0:t.getChildId(l)),d=G().createElement(G().Fragment,null,G().createElement("label",{className:u.label,htmlFor:p},n,o&&G().createElement("span",{className:u.optional}," - optional"),a&&G().createElement(J.Tooltip,{placement:"top",content:a,theme:"info",interactive:i},G().createElement(J.Icon,{tabIndex:0,name:"info-circle",size:"sm",className:u.icon}))),G().createElement(dt,{v:.5}));return G().createElement("div",{className:u.root},G().createElement(J.Field,((e,t)=>{for(var r in t||(t={}))bt.call(t,r)&&gt(e,r,t[r]);if(ht)for(var r of ht(t))mt.call(t,r)&&gt(e,r,t[r]);return e})({className:u.field,label:d},c),l))},wt=(e,t)=>({root:(0,Y.css)({minWidth:e.spacing(null!=t?t:0)}),label:(0,Y.css)({fontSize:12,fontWeight:e.typography.fontWeightMedium}),optional:(0,Y.css)({fontStyle:"italic",color:e.colors.text.secondary}),field:(0,Y.css)({marginBottom:0}),icon:(0,Y.css)({color:e.colors.text.secondary,marginLeft:e.spacing(1),":hover":{color:e.colors.text.primary}})});var St,Ot,Et,xt,_t,Tt=[{color:"#ff006e",label:" empty",value:" table or log"},{color:"#80ed99",label:" Time colomn",value:" Timeseries"},{color:"#0077b6",label:"stat",value:" gauge/stat graph"},{color:"#0096c7",label:"pie",value:" pie graph"},{color:"#00b4d8",label:"bar",value:" bar graph"},{color:"#48cae4",label:"trace",value:"Trace Trace graph"},{color:"#90e0ef",label:"map",value:" map graph"}],Ft=[{color:"#ffca3a",label:" LogTrace",value:"[No need to fill in] This situation applies to Log, Trace and the full column of the table"},{color:"#8ac926",label:"col1,col2,col3 ",value:"[col1,col2,col3] The most common form, displaying several numeric columns in the chart"},{color:"#1982c4",label:"col1#:#col2 barSLScol1col2",value:"[col1#:#col2] Applicable to bar and SLS metricStore, col1 is the aggregation column, col2 is other columns"}],Ct=[{label:"TimeSeries / Custom",value:"custom",description:" Timeseries  Time colomnx"},{label:"Table / Log",value:"",description:" table or log"},{label:"Stat / Gauge",value:"stat",description:" gauge/stat graph"},{label:"Pie",value:"pie",description:" pie graph"},{label:"Bar",value:"bar",description:" bar graph"},{label:"Trace",value:"trace",description:"Trace Trace graph"},{label:"Map",value:"map",description:" map graph"}],It=[{label:"ALL(SQL)",value:"all"},{label:"Logstore(SQL)",value:"logstore"},{label:"Metricstore(SQL)",value:"metricsql"},{label:"Metricstore(PromQL)",value:"metricstore"}],Dt=null!==(St=null===(Ot=window)||void 0===Ot||null===(Et=Ot.grafanaBootData)||void 0===Et||null===(xt=Et.settings)||void 0===xt||null===(_t=xt.buildInfo)||void 0===_t?void 0:_t.version)&&void 0!==St?St:"",Pt={id:"sls",extensions:[".sls"],aliases:["sls","SLS","SLSQuery"],mimetypes:[]};const jt=function(e){var t=(0,H.useRef)(e);return t.current=e,t};var kt,At=new Uint8Array(16);function Rt(){if(!kt&&!(kt="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return kt(At)}const Vt=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const Nt=function(e){return"string"==typeof e&&Vt.test(e)};for(var Lt=[],Bt=0;Bt<256;++Bt)Lt.push((Bt+256).toString(16).substr(1));const Mt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(Lt[e[t+0]]+Lt[e[t+1]]+Lt[e[t+2]]+Lt[e[t+3]]+"-"+Lt[e[t+4]]+Lt[e[t+5]]+"-"+Lt[e[t+6]]+Lt[e[t+7]]+"-"+Lt[e[t+8]]+Lt[e[t+9]]+"-"+Lt[e[t+10]]+Lt[e[t+11]]+Lt[e[t+12]]+Lt[e[t+13]]+Lt[e[t+14]]+Lt[e[t+15]]).toLowerCase();if(!Nt(r))throw TypeError("Stringified UUID is invalid");return r};const qt=function(e,t,r){var n=(e=e||{}).random||(e.rng||Rt)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var o=0;o<16;++o)t[r+o]=n[o];return t}return Mt(n)};var Qt=s(7);var Kt,$t=null;!function(e){e[e.Method=0]="Method",e[e.Function=1]="Function",e[e.Constructor=2]="Constructor",e[e.Field=3]="Field",e[e.Variable=4]="Variable",e[e.Class=5]="Class",e[e.Struct=6]="Struct",e[e.Interface=7]="Interface",e[e.Module=8]="Module",e[e.Property=9]="Property",e[e.Event=10]="Event",e[e.Operator=11]="Operator",e[e.Unit=12]="Unit",e[e.Value=13]="Value",e[e.Constant=14]="Constant",e[e.Enum=15]="Enum",e[e.EnumMember=16]="EnumMember",e[e.Keyword=17]="Keyword",e[e.Text=18]="Text",e[e.Color=19]="Color",e[e.File=20]="File",e[e.Reference=21]="Reference",e[e.Customcolor=22]="Customcolor",e[e.Folder=23]="Folder",e[e.TypeParameter=24]="TypeParameter",e[e.User=25]="User",e[e.Issue=26]="Issue",e[e.Snippet=27]="Snippet"}(Kt||(Kt={}));var Wt,Ut,zt=[{label:"SELECT",type:Kt.Keyword},{label:"FROM",type:Kt.Keyword},{label:"AS",type:Kt.Keyword},{label:"DISTINCT",type:Kt.Keyword},{label:"GROUP",type:Kt.Keyword},{label:"WHERE",type:Kt.Keyword},{label:"BY",type:Kt.Keyword},{label:"HAVING",type:Kt.Keyword},{label:"ORDER",type:Kt.Keyword},{label:"LIMIT",type:Kt.Keyword},{label:"OR",type:Kt.Keyword},{label:"AND",type:Kt.Keyword},{label:"IN",type:Kt.Keyword},{label:"NOT",type:Kt.Keyword},{label:"BETWEEN",type:Kt.Keyword},{label:"LIKE",type:Kt.Keyword},{label:"IS",type:Kt.Keyword},{label:"ASC",type:Kt.Keyword},{label:"DESC",type:Kt.Keyword},{label:"SUBSTRING",type:Kt.Keyword},{label:"CASE",type:Kt.Keyword},{label:"WHEN",type:Kt.Keyword},{label:"THEN",type:Kt.Keyword},{label:"ELSE",type:Kt.Keyword},{label:"END",type:Kt.Keyword},{label:"JOIN",type:Kt.Keyword},{label:"INNER",type:Kt.Keyword},{label:"LEFT",type:Kt.Keyword},{label:"RIGHT",type:Kt.Keyword},{label:"OUTER",type:Kt.Keyword},{label:"ON",type:Kt.Keyword},{label:"UNION",type:Kt.Keyword}],Ht=[{label:"ALL",type:Kt.Operator},{label:"AND",type:Kt.Operator},{label:"ANY",type:Kt.Operator},{label:"BETWEEN",type:Kt.Operator},{label:"IN",type:Kt.Operator},{label:"LIKE",type:Kt.Operator},{label:"NOT",type:Kt.Operator},{label:"OR",type:Kt.Operator},{label:"SOME",type:Kt.Operator},{label:"EXCEPT",type:Kt.Operator},{label:"INTERSECT",type:Kt.Operator},{label:"UNION",type:Kt.Operator},{label:"APPLY",type:Kt.Operator},{label:"CROSS",type:Kt.Operator},{label:"FULL",type:Kt.Operator},{label:"INNER",type:Kt.Operator},{label:"JOIN",type:Kt.Operator},{label:"LEFT",type:Kt.Operator},{label:"OUTER",type:Kt.Operator},{label:"RIGHT",type:Kt.Operator},{label:"CONTAINS",type:Kt.Operator},{label:"FREETEXT",type:Kt.Operator},{label:"IS",type:Kt.Operator},{label:"NULL",type:Kt.Operator},{label:"PIVOT",type:Kt.Operator},{label:"UNPIVOT",type:Kt.Operator},{label:"MATCHED",type:Kt.Operator}],Gt={arbitrary:{type:Kt.Field},avg:{type:Kt.Field},checksum:{type:Kt.Field},COUNT:{type:Kt.Field},count_if:{type:Kt.Field},geometric_mean:{type:Kt.Field},max_by:{type:Kt.Field},min_by:{type:Kt.Field},max:{type:Kt.Field},min:{type:Kt.Field},sum:{type:Kt.Field},bitwise_and_agg:{type:Kt.Field},bitwise_or_agg:{type:Kt.Field},histogram:{type:Kt.Method},map_agg:{type:Kt.Method},multimap_agg:{type:Kt.Method},cardinality:{type:Kt.Method},element_at:{type:Kt.Method},map:{type:Kt.Method},map_from_entries:{type:Kt.Method},map_entries:{type:Kt.Method},map_concat:{type:Kt.Method},map_filter:{type:Kt.Method},transform_keys:{type:Kt.Method},transform_values:{type:Kt.Method},map_keys:{type:Kt.Method},map_values:{type:Kt.Method},map_zip_with:{type:Kt.Method},approx_distinct:{type:Kt.Method},approx_percentile:{type:Kt.Method},numeric_histogram:{type:Kt.Method},corr:{type:Kt.Function},covar_pop:{type:Kt.Function},covar_samp:{type:Kt.Function},regr_intercept:{type:Kt.Function},regr_slope:{type:Kt.Function},stddev:{type:Kt.Function},stddev_samp:{type:Kt.Function},stddev_pop:{type:Kt.Function},variance:{type:Kt.Function},var_samp:{type:Kt.Function},var_pop:{type:Kt.Function},abs:{type:Kt.Function},cbrt:{type:Kt.Function},ceiling:{type:Kt.Function},cosine_similarity:{type:Kt.Function},degrees:{type:Kt.Function},e:{type:Kt.Function},exp:{type:Kt.Function},floor:{type:Kt.Function},from_base:{type:Kt.Function},ln:{type:Kt.Function},log2:{type:Kt.Function},log10:{type:Kt.Function},log:{type:Kt.Function},pi:{type:Kt.Function},pow:{type:Kt.Function},radians:{type:Kt.Function},rand:{type:Kt.Function},random:{type:Kt.Function},round:{type:Kt.Function},sqrt:{type:Kt.Function},to_base:{type:Kt.Function},truncate:{type:Kt.Function},acos:{type:Kt.Function},asin:{type:Kt.Function},atan:{type:Kt.Function},atan2:{type:Kt.Function},cos:{type:Kt.Function},sin:{type:Kt.Function},cosh:{type:Kt.Function},tan:{type:Kt.Function},tanh:{type:Kt.Function},infinity:{type:Kt.Function},is_infinity:{type:Kt.Function},is_finity:{type:Kt.Function},is_nan:{type:Kt.Function},chr:{type:Kt.Function},length:{type:Kt.Function},levenshtein_distance:{type:Kt.Function},lpad:{type:Kt.Function},rpad:{type:Kt.Function},ltrim:{type:Kt.Function},replace:{type:Kt.Function},reverse:{type:Kt.Function},rtrim:{type:Kt.Function},split:{type:Kt.Function},split_part:{type:Kt.Function},split_to_map:{type:Kt.Function},position:{type:Kt.Function},strpos:{type:Kt.Function},substr:{type:Kt.Function},trim:{type:Kt.Function},upper:{type:Kt.Function},concat:{type:Kt.Function},hamming_distance:{type:Kt.Function},current_date:{type:Kt.Function},current_time:{type:Kt.Function},current_timestamp:{type:Kt.Function},current_timezone:{type:Kt.Function},from_iso8601_timestamp:{type:Kt.Function},from_iso8601_date:{type:Kt.Function},from_unixtime:{type:Kt.Function},localtime:{type:Kt.Function},localtimestamp:{type:Kt.Function},now:{type:Kt.Function},to_unixtime:{type:Kt.Function},date_trunc:{type:Kt.Function},date_format:{type:Kt.Function},date_parse:{type:Kt.Function},date_add:{type:Kt.Function},date_diff:{type:Kt.Function},time_series:{type:Kt.Function},url_extract_fragment:{type:Kt.Function},url_extract_host:{type:Kt.Function},url_extract_parameter:{type:Kt.Function},url_extract_path:{type:Kt.Function},url_extract_port:{type:Kt.Function},url_extract_protocol:{type:Kt.Function},url_extract_query:{type:Kt.Function},url_encode:{type:Kt.Function},url_decode:{type:Kt.Function},regexp_extract_all:{type:Kt.Function},regexp_extract:{type:Kt.Function},regexp_like:{type:Kt.Function},regexp_replace:{type:Kt.Function},regexp_split:{type:Kt.Function},json_parse:{type:Kt.Function},json_format:{type:Kt.Function},json_array_contains:{type:Kt.Function},json_array_get:{type:Kt.Function},json_array_length:{type:Kt.Function},json_extract:{type:Kt.Function},json_extract_scalar:{type:Kt.Function},json_size:{type:Kt.Function},cast:{type:Kt.Method},try_cast:{type:Kt.Method},ip_to_domain:{type:Kt.Function},ip_to_country:{type:Kt.Function},ip_to_province:{type:Kt.Function},ip_to_city:{type:Kt.Function},ip_to_geo:{type:Kt.Function},ip_to_city_geo:{type:Kt.Function},ip_to_provider:{type:Kt.Function},ip_to_country_code:{type:Kt.Function},compare:{type:Kt.Function},ts_smooth_simple:{type:Kt.Interface},ts_smooth_fir:{type:Kt.Interface},ts_smooth_iir:{type:Kt.Interface},ts_period_detect:{type:Kt.Interface},ts_cp_detect:{type:Kt.Interface},ts_breakout_detect:{type:Kt.Interface},ts_predicate_simple:{type:Kt.Interface},ts_predicate_ar:{type:Kt.Interface},ts_predicate_arma:{type:Kt.Interface},ts_predicate_arima:{type:Kt.Interface},ts_regression_predict:{type:Kt.Interface},ts_decompose:{type:Kt.Interface},ts_density_cluster:{type:Kt.Interface},ts_hierarchical_cluster:{type:Kt.Interface},ts_similar_instance:{type:Kt.Interface},pattern_stat:{type:Kt.Interface},pattern_diff:{type:Kt.Interface},ts_find_peaks:{type:Kt.Interface},promql_query:{type:Kt.Struct},promql_query_range:{type:Kt.Struct},promql_labels:{type:Kt.Struct},promql_label_values:{type:Kt.Struct},promql_series:{type:Kt.Struct}},Jt={wordPattern:/(-?\d*\.\d\w*)|([^`~!#%^&*()\-=+\[{\]}\\|;:'",.<>\/?\s]+)/g,comments:{lineComment:"#"},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"<",close:">"}],folding:{}},Yt=Object.keys(Gt),Xt=Yt.map((function(e){return{label:e,type:a().get(Gt,e).type}})),Zt=zt.map((function(e){return e.label})),er=Ht.map((function(e){return e.label})),tr=Xt.concat(zt).concat(Ht),rr={ignoreCase:!0,defaultToken:"",tokenPostfix:".sls",vectorMatching:"",symbols:/[=><!~?:&|+\-*\/^%]+/,escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,digits:/\d+(_+\d+)*/,octaldigits:/[0-7]+(_+[0-7]+)*/,binarydigits:/[0-1]+(_+[0-1]+)*/,hexdigits:/[[0-9a-fA-F]+(_+[0-9a-fA-F]+)*/,integersuffix:/(ll|LL|u|U|l|L)?(ll|LL|u|U|l|L)?/,floatsuffix:/[fFlL]?/,keywords:Zt,operators:er,builtinFunctions:Yt,builtinVariables:[],pseudoColumns:["$ACTION","$IDENTITY","$ROWGUID","$PARTITION"],tokenizer:{root:[{include:"@comments"},{include:"@whitespace"},{include:"@pseudoColumns"},{include:"@numbers"},{include:"@strings"},{include:"@complexIdentifiers"},{include:"@scopes"},[/[;,.]/,"delimiter"],[/[()]/,"@brackets"],[/[\w@#$]+/,{cases:{"@operators":"operator","@builtinVariables":"predefined","@builtinFunctions":"predefined","@keywords":"keyword","@default":"identifier"}}],[/[<>=!%&+\-*/|~^]/,"operator"]],whitespace:[[/\s+/,"white"]],comments:[[/--+.*/,"comment"],[/\/\*/,{token:"comment.quote",next:"@comment"}]],comment:[[/[^*/]+/,"comment"],[/\*\//,{token:"comment.quote",next:"@pop"}],[/./,"comment"]],pseudoColumns:[[/[$][A-Za-z_][\w@#$]*/,{cases:{"@pseudoColumns":"predefined","@default":"identifier"}}]],numbers:[[/0[xX][0-9a-fA-F]*/,"number"],[/[$][+-]*\d*(\.\d*)?/,"number"],[/((\d+(\.\d*)?)|(\.\d+))([eE][\-+]?\d+)?/,"number"]],strings:[[/N'/,{token:"string",next:"@string"}],[/'/,{token:"string",next:"@string"}]],string:[[/[^']+/,"string"],[/''/,"string"],[/'/,{token:"string",next:"@pop"}]],complexIdentifiers:[[/\[/,{token:"identifier.quote",next:"@bracketedIdentifier"}],[/"/,{token:"identifier.quote",next:"@quotedIdentifier"}]],bracketedIdentifier:[[/[^\]]+/,"identifier"],[/]]/,"identifier"],[/]/,{token:"identifier.quote",next:"@pop"}]],quotedIdentifier:[[/[^"]+/,"identifier"],[/""/,"identifier"],[/"/,{token:"identifier.quote",next:"@pop"}]],scopes:[[/BEGIN\s+(DISTRIBUTED\s+)?TRAN(SACTION)?\b/i,"keyword"],[/BEGIN\s+TRY\b/i,{token:"keyword.try"}],[/END\s+TRY\b/i,{token:"keyword.try"}],[/BEGIN\s+CATCH\b/i,{token:"keyword.catch"}],[/END\s+CATCH\b/i,{token:"keyword.catch"}],[/(BEGIN|CASE)\b/i,{token:"keyword.block"}],[/END\b/i,{token:"keyword.block"}],[/WHEN\b/i,{token:"keyword.choice"}],[/THEN\b/i,{token:"keyword.choice"}]]}},nr={provideCompletionItems:function(){return{suggestions:tr.map((function(e){return{label:e,kind:e.type,insertText:e.label,detail:e.label,insertTextRules:4}}))}}};function or(){return or=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},or.apply(this,arguments)}function ar(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var ir={codeLens:!1,contextmenu:!1,fixedOverflowWidgets:!0,folding:!1,fontSize:14,lineDecorationsWidth:8,lineNumbers:"off",minimap:{enabled:!1},overviewRulerBorder:!1,overviewRulerLanes:0,padding:{top:4,bottom:5},renderLineHighlight:"none",scrollbar:{vertical:"hidden",verticalScrollbarSize:8,horizontal:"hidden",horizontalScrollbarSize:0},scrollBeyondLastLine:!1,suggestFontSize:12,wordWrap:"on"},lr=Pt.id,sr=!1;const cr=function(e){var t,r=qt(),n=(0,H.useRef)((null===$t&&($t={storageService:(t=new Map,t.set("expandSuggestionDocs",(!0).toString()),{onDidChangeValue:function(e){},onDidChangeTarget:function(e){},onWillSaveState:function(e){},get:function(e,r,n){var o;return null!==(o=t.get(e))&&void 0!==o?o:n},getBoolean:function(e,r,n){var o=t.get(e);return void 0!==o?"true"===o:n},getNumber:function(e,r,n){var o=t.get(e);return void 0!==o?parseInt(o,10):n},store:function(e,r,n,o){null==r?t.delete(e):t.set(e,r.toString())},remove:function(e,r){t.delete(e)},keys:function(e,r){return Array.from(t.keys())},logStorage:function(){},migrate:function(){return Promise.resolve(void 0)},isNew:function(e){return!0},flush:function(e){return Promise.resolve(void 0)}})}),$t)),a=(0,H.useRef)(null),i=e.onBlur,l=e.onRunQuery,s=e.initialValue,c=e.placeholder,u=e.onChange,p=jt(l),d=jt(i),f=jt(u),y=(0,H.useRef)(null),h=function(e,t){return{container:(0,Y.css)(Wt||(Wt=ar(["\n      border-radius: ",";\n      border: 1px solid ",";\n    "])),e.shape.borderRadius(),e.components.input.borderColor),placeholder:(0,Y.css)(Ut||(Ut=ar(["\n      ::after {\n        content: '","';\n        font-family: ",";\n        opacity: 0.3;\n      }\n    "])),t,e.typography.fontFamilyMonospace)}}((0,J.useTheme2)(),c);return(0,H.useEffect)((function(){return function(){var e;null===(e=y.current)||void 0===e||e.call(y)}}),[]),G().createElement("div",{"aria-label":Qt.selectors.components.QueryField.container,className:h.container,ref:a},G().createElement(J.ReactMonacoEditor,{overrideServices:n.current,options:ir,language:"sls",value:s,beforeMount:function(e){!function(e){if(!1===sr){sr=!0;var t=Pt.aliases,r=Pt.extensions,n=Pt.mimetypes;e.languages.register({id:lr,aliases:t,extensions:r,mimetypes:n}),e.languages.setMonarchTokensProvider(lr,rr),e.languages.setLanguageConfiguration(lr,Jt)}}(e)},onMount:function(e,t){var n,i=e.createContextKey("isEditorFocused"+r,!1);e.onDidBlurEditorWidget((function(){i.set(!1),d.current(e.getValue())})),e.onDidFocusEditorText((function(){i.set(!0)}));var l=nr,s=or({},l,{provideCompletionItems:function(t,r,n,o){var a;return(null===(a=e.getModel())||void 0===a?void 0:a.id)!==t.id?{suggestions:[]}:l.provideCompletionItems(t,r,n,o)}}),u=t.languages.registerCompletionItemProvider(lr,s).dispose;y.current=u;var b=function(){var t=a.current;if(null!==t){var r=e.getContentHeight();t.style.height="".concat(r+2,"px"),t.style.width="100%";var n=t.clientWidth;e.layout({width:n,height:r})}};e.onDidContentSizeChange(b),b();var m=(0,o.debounce)((function(){var t=e.getValue();f.current(t)}),300);if(null===(n=e.getModel())||void 0===n||n.onDidChangeContent((function(){m()})),e.addCommand(t.KeyMod.Shift|t.KeyCode.Enter,(function(){p.current(e.getValue())}),"isEditorFocused"+r),c){var g=[{range:new t.Range(1,1,1,1),options:{className:h.placeholder,isWholeLine:!0}}],v=[],w=function(){var t=e.getModel();if(t){var r=0===t.getValueLength()?g:[];v=t.deltaDecorations(v,r)}};w(),e.onDidChangeModelContent(w)}}}))};function ur(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],s=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return pr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const dr=function(e){var t=e.initialValue,r=e.onChange,n=e.disableMultiLine,o=(0,H.useRef)(),a=ur((0,H.useState)(30),2),i=a[0],l=a[1],s=(0,H.useCallback)((function(e,t){var r,n;null===(r=o.current)||void 0===r||null===(n=r.resolve)||void 0===n||n.call(r,{editor:e,monaco:t})}),[]);return G().createElement("div",{style:{width:"100%"}},G().createElement("div",{style:{width:"calc(100% - 65px)",display:"inline-block",fontSize:"14px"}},G().createElement(J.CodeEditor,{value:t,language:"sql",height:i,width:"100%",showMiniMap:!1,onBlur:r,onSave:r,onEditorDidMount:s,monacoOptions:{contextmenu:!0,codeLens:!0,overviewRulerBorder:!0}})),!n&&G().createElement("div",{style:{width:"60px",height:"100%",display:"inline-block",float:"right"}},G().createElement(J.Button,{icon:"angle-up",variant:"secondary",size:"sm",disabled:30===i,onClick:function(){l(i-30)}}),G().createElement(J.Button,{icon:"angle-down",variant:"secondary",size:"sm",disabled:120===i,onClick:function(){l(i+30)}})))},fr="function"==typeof btoa,yr="function"==typeof Buffer,hr=("function"==typeof TextDecoder&&new TextDecoder,"function"==typeof TextEncoder?new TextEncoder:void 0),br=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),mr=((e=>{let t={};e.forEach(((e,r)=>t[e]=r))})(br),String.fromCharCode.bind(String)),gr=("function"==typeof Uint8Array.from&&Uint8Array.from.bind(Uint8Array),e=>e.replace(/=/g,"").replace(/[+\/]/g,(e=>"+"==e?"-":"_"))),vr=e=>{let t,r,n,o,a="";const i=e.length%3;for(let i=0;i<e.length;){if((r=e.charCodeAt(i++))>255||(n=e.charCodeAt(i++))>255||(o=e.charCodeAt(i++))>255)throw new TypeError("invalid character found");t=r<<16|n<<8|o,a+=br[t>>18&63]+br[t>>12&63]+br[t>>6&63]+br[63&t]}return i?a.slice(0,i-3)+"===".substring(i):a},wr=fr?e=>btoa(e):yr?e=>Buffer.from(e,"binary").toString("base64"):vr,Sr=yr?e=>Buffer.from(e).toString("base64"):e=>{let t=[];for(let r=0,n=e.length;r<n;r+=4096)t.push(mr.apply(null,e.subarray(r,r+4096)));return wr(t.join(""))},Or=e=>{if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?mr(192|t>>>6)+mr(128|63&t):mr(224|t>>>12&15)+mr(128|t>>>6&63)+mr(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return mr(240|t>>>18&7)+mr(128|t>>>12&63)+mr(128|t>>>6&63)+mr(128|63&t)},Er=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,xr=e=>e.replace(Er,Or),_r=yr?e=>Buffer.from(e,"utf8").toString("base64"):hr?e=>Sr(hr.encode(e)):e=>wr(xr(e)),Tr=(e,t=!1)=>t?gr(_r(e)):_r(e),Fr=Tr;function Cr(e){var t=""===Dt||Dt.startsWith("8.0")||Dt.startsWith("8.1")||Dt.startsWith("8.2")||Dt.startsWith("8.3")||Dt.startsWith("7"),r="xcol"===e.type?Tt:Ft;return t?G().createElement("table",null,r.map((function(e,t){return G().createElement("tr",{key:e.color},G().createElement("td",{style:{width:"45px"}},"".concat(t+1,".")),G().createElement("td",null,e.label),G().createElement("td",null,e.value))}))):G().createElement(J.Card,null,G().createElement(J.Card.Heading,null,"".concat(e.type,"  Introduction")),G().createElement(J.Card.Description,null,G().createElement(J.SeriesTable,{series:r})))}var Ir,Dr,Pr,jr,kr,Ar,Rr;function Vr(e){return Vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vr(e)}function Nr(e){return function(e){if(Array.isArray(e))return Lr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Lr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Lr(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Br(){return Br=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Br.apply(this,arguments)}function Mr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ur(n.key),n)}}function qr(e,t){return qr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},qr(e,t)}function Qr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=$r(e);if(t){var o=$r(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Vr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Kr(e)}(this,r)}}function Kr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $r(e){return $r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$r(e)}function Wr(e,t,r){return(t=Ur(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ur(e){var t=function(e,t){if("object"!==Vr(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Vr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Vr(t)?t:String(t)}var zr=function(e,t,r){return Ct.find((function(t){return t.value===e}))?(t(),e):(r(),"custom")},Hr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qr(e,t)}(i,e);var a=Qr(i);function i(){var e,t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return Wr(Kr(t=a.call.apply(a,[this].concat(o))),"state",{loading:!1,showAlert:!1,xColDisabled:"custom"!==zr(null!==(e=t.props.query.xcol)&&void 0!==e?e:"custom",(function(){}),(function(){})),url:"",message:"",logstoreList:[]}),Wr(Kr(t),"autoSelect",(function(e){return zr(e,(function(){t.setState({xColDiabled:!0})}),(function(){t.setState({xColDiabled:!1})}))})),Wr(Kr(t),"onQueryTextChange",(function(e){var r=t.props;(0,r.onChange)(Br({},r.query,{query:e.target.value}))})),Wr(Kr(t),"onQueryTextChangeString",(function(e){var r=t.props;(0,r.onChange)(Br({},r.query,{query:e}))})),Wr(Kr(t),"onQueryTextChangeWithRunQuery",(function(e){var r=t.props,n=r.onChange,o=r.query,a=r.onRunQuery;n(Br({},o,{query:e})),a()})),Wr(Kr(t),"onXChange",(function(e){var r=t.props,n=r.onChange,o=r.query,a=r.onRunQuery;n(Br({},o,{xcol:e.target.value})),t.autoSelect(e.target.value),a()})),Wr(Kr(t),"onYChange",(function(e){var r=t.props,n=r.onChange,o=r.query,a=r.onRunQuery;n(Br({},o,{ycol:e.target.value})),a()})),Wr(Kr(t),"onDatasourceTypeChange",(function(e){var r=t.props;(0,r.onChange)(Br({},r.query,{type:e.value,logstore:""})),t.getList(e.value)})),Wr(Kr(t),"onLogstoreChange",(function(e){var r=t.props;(0,r.onChange)(Br({},r.query,{logstore:e.value}))})),Wr(Kr(t),"onQueryTypeChange",(function(e){var r=t.props,n=r.onChange,o=r.query,a=r.onRunQuery;n(Br({},o,{queryType:e})),null==a||a()})),Wr(Kr(t),"onFormatChange",(function(e){var r=t.props,n=r.onChange,o=r.query,a=r.onRunQuery;n(Br({},o,{legendFormat:e.currentTarget.value})),a()})),Wr(Kr(t),"onStepChange",(function(e){var r=t.props,n=r.onChange,o=r.query,a=r.onRunQuery;n(Br({},o,{step:e.currentTarget.value})),a()})),Wr(Kr(t),"gotoSLS",(function(){var e,r,o=t.props,a=o.datasource,i=o.query,l=o.range,s=null!==(e=null==l?void 0:l.from.unix())&&void 0!==e?e:Math.round(Date.now()/1e3-900),c=null!==(r=null==l?void 0:l.to.unix())&&void 0!==r?r:Math.round(Date.now()/1e3);try{var u;t.setState({loading:!0}),(0,n.getBackendSrv)().datasourceRequest({url:"/api/datasources/".concat(a.id,"/resources/api/gotoSLS"),method:"POST",headers:{"Content-Type":"application/json"},data:{Encoding:"encode=base64&queryString=".concat(encodeURIComponent(Fr(null!==(u=i.query)&&void 0!==u?u:"")),"&queryTimeType=99&startTime=").concat(s,"&endTime=").concat(c)}}).then((function(e){t.setState({loading:!1});var r=e.data.err,n=e.data.url;if(""!==r)t.setState({showAlert:!0,message:e.data.message,url:n});else{var o=window.open(n,"_blank");o&&(o.opener=null)}})).catch((function(e){t.setState({loading:!1})}))}catch(e){}})),Wr(Kr(t),"getList",(function(e){var r,o=t.props.datasource,a=((null===(r=(0,n.getDataSourceSrv)().getInstanceSettings(o.getRef()))||void 0===r?void 0:r.jsonData)||{}).project;try{(0,n.getBackendSrv)().datasourceRequest({url:"/api/datasources/".concat(o.id,"/resources/api/getLogstoreList"),method:"POST",headers:{"Content-Type":"application/json"},data:{Project:a,TelemetryType:"all"!==e&&e?"logstore"===e?"None":"Metrics":""}}).then((function(e){var r;200===e.status&&null!==(r=e.data)&&void 0!==r&&r.data&&t.setState({logstoreList:e.data.data||[]})})).catch((function(e){}))}catch(e){}})),t}return function(e,t,r){t&&Mr(e.prototype,t),r&&Mr(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(i,[{key:"componentDidMount",value:function(){var e=this.props.query;this.getList((null==e?void 0:e.type)||"logstore")}},{key:"getCollapsedInfo",value:function(e){var t=[];return t.push("Legend: ".concat(e.legendFormat||"auto")),t.push("Step: ".concat(e.step||"auto")),t.push("Type: ".concat(e.queryType||"range")),t}},{key:"render",value:function(){var e,a=this,i=this.props,l=i.isVariable,s=i.datasource,c=(null===(e=(0,n.getDataSourceSrv)().getInstanceSettings(s.getRef()))||void 0===e?void 0:e.jsonData)||{},u=(0,o.defaults)(this.props.query,l?r:t),p=u.query,d=u.xcol,f=u.ycol,y=u.type,h=u.logstore,b=u.queryType,m=u.legendFormat,g=u.step,v=c.logstore,w=this.state.logstoreList,S=Nr(new Set([v].concat(Nr(w)))).map((function(e){return e===v?{label:e,value:e,description:"Defalut Logstore"}:{label:e,value:e}}));return G().createElement(G().Fragment,null,G().createElement("div",{className:"gf-form-inline",style:{lineHeight:"32px",verticalAlign:"center"}},G().createElement(J.InlineField,{label:"",labelWidth:24},G().createElement(J.Select,{width:24,options:It,onChange:this.onDatasourceTypeChange,value:y})),G().createElement(J.InlineField,{label:"",labelWidth:24},G().createElement(J.Select,{width:24,options:S,onChange:this.onLogstoreChange,value:h||v})),!l&&G().createElement(J.Button,{style:{float:"right",marginLeft:"10px"},disabled:this.state.loading,fill:"outline",onClick:function(){a.gotoSLS()}},Ir||(Ir=G().createElement(J.Icon,{name:"external-link-alt"})),this.state.loading?" loading...":" goto SLS")),G().createElement("div",{className:"gf-form gf-form--grow flex-shrink-1 min-width-15"},G().createElement(J.ConfirmModal,{isOpen:this.state.showAlert,title:"STS",body:": ".concat(this.state.message," ConfirmSTS"),confirmText:"Confirm",icon:"exclamation-triangle",onConfirm:function(){var e=window.open(a.state.url,"_blank");e&&(e.opener=null),a.setState({showAlert:!1,message:"",url:""})},onDismiss:function(){a.setState({showAlert:!1})}}),Dr||(Dr=G().createElement(J.InlineFormLabel,{width:6,className:"query-keyword"},"Query")),""===Dt||Dt.startsWith("8.0")||Dt.startsWith("8.1")||Dt.startsWith("8.2")||Dt.startsWith("7")?G().createElement("div",{style:{width:"100%"}},G().createElement(dr,{onChange:this.onQueryTextChangeString,onRunQuery:this.onQueryTextChangeWithRunQuery,onBlur:this.onQueryTextChangeString,initialValue:null!=p?p:"",languageProvider:{},history:[],placeholder:""})):G().createElement(cr,{onChange:this.onQueryTextChangeString,onRunQuery:this.onQueryTextChangeWithRunQuery,onBlur:this.onQueryTextChangeString,initialValue:null!=p?p:"",languageProvider:{},history:[],placeholder:""})),"metricstore"!==y&&!l&&G().createElement("div",{className:"gf-form-inline",style:{lineHeight:"32px",verticalAlign:"center"}},G().createElement(J.InlineField,{label:"ycol",labelWidth:12},G().createElement(J.Input,{width:60,prefix:Pr||(Pr=G().createElement(J.Icon,{name:"text-fields"})),value:f,onChange:this.onYChange,label:"ycol",suffix:jr||(jr=G().createElement(J.Tooltip,{content:G().createElement(Cr,{type:"ycol"}),interactive:!0,theme:"info-alt"},G().createElement(J.Icon,{name:"question-circle"})))})),G().createElement(J.InlineField,{label:"xcol",labelWidth:12},G().createElement("div",{style:{display:"flex"}},G().createElement(J.Select,{width:this.state.xColDisabled?40:20,menuShouldPortal:!0,options:Ct,value:this.autoSelect(null!=d?d:"time"),onChange:function(e){var t=a.props,r=t.onChange,n=t.query,o=t.onRunQuery;"custom"!==e.value?(a.setState({xColDisabled:!0}),r(Br({},n,{xcol:e.value})),o()):(a.setState({xColDisabled:!1}),r(Br({},n,{xcol:"time"})))},prefix:kr||(kr=G().createElement(J.Icon,{name:"palette"}))}),G().createElement(J.Input,{width:this.state.xColDisabled?20:40,disabled:this.state.xColDisabled,prefix:Ar||(Ar=G().createElement(J.Icon,{name:"x"})),value:d,onChange:this.onXChange,label:"xcol",suffix:Rr||(Rr=G().createElement(J.Tooltip,{content:G().createElement(Cr,{type:"xcol"}),interactive:!0,theme:"info-alt"},G().createElement(J.Icon,{name:"question-circle"})))})))),"metricstore"===y&&G().createElement(ot,null,G().createElement("div",null,G().createElement(st,{title:"Options",collapsedInfo:this.getCollapsedInfo(u)},!l&&G().createElement(vt,{label:"Format",style:{margin:"0 0 4px 4px"}},G().createElement(J.AutoSizeInput,{type:"text",placeholder:"auto",minWidth:10,onCommitChange:this.onFormatChange,defaultValue:m})),G().createElement(vt,{label:"Step",style:{margin:"0 0 4px 4px"}},G().createElement(J.AutoSizeInput,{type:"text",placeholder:"auto",minWidth:10,onCommitChange:this.onStepChange,defaultValue:g})),G().createElement(vt,{label:"Type"},G().createElement(J.RadioButtonGroup,{options:[{label:"Range",value:"range"},{label:"Instant",value:"instant"}],value:b||"range",onChange:this.onQueryTypeChange}))))))}}]),i}(H.PureComponent);function Gr(){return Gr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gr.apply(this,arguments)}var Jr=new e.DataSourcePlugin(L).setConfigEditor(Xe).setQueryEditor(Hr).setVariableQueryEditor((function(e){return G().createElement(Hr,Gr({},e,{isVariable:!0}))}))})(),c})()));
//# sourceMappingURL=module.js.map